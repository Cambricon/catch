模块概述
--------------------------------

.. 该模块的概念和基本功能介绍。

PyTorch是Facebook开源的深度学习编程框架，适用于Python、C++等编程语言，用以实现高效的GPU并行计算及深度学习网络搭建，具有轻松扩展、快速实现、生产部署稳定性强等特点。

为支持寒武纪MLU（Machine Learning Unit，机器学习处理器），寒武纪定制了PyTorch（以下简称Cambricon PyTorch）。

Cambricon PyTorch兼容原生PyTorch的Python编程接口和原生PyTorch网络模型，支持单机单卡训练和单机多卡训练功能。应用程序开发人员可以使用Python接口来完成各种正向推理任务。正向推理时，网络权重可以从pth格式文件中读取，已支持的分类和检测网络结构由torchvision管理，可以从torchvision中读取。

应用程序开发人员可以使用Python接口完成各种单机单卡训练任务，也可以使用PyTorch原生分布式机制Distributed Data Parallel（DDP）进行单机多卡训练，并支持寒武纪自研通信后端CNCL。


v1.1.2
--------------------------------

.. _测试过的版本配置组合_v1.1.2:

测试过的版本配置组合
~~~~~~~~~~~~~~~~~~~~

.. tabularcolumns:: |m{0.25\textwidth}|m{0.3\textwidth}|
.. table:: 测试过的版本组合v1.1.2
   :align: center

   +-------------------------+--------------------------------------------+
   | Cambricon PyTorch       | 1.1.2                                      |
   +-------------------------+--------------------------------------------+
   | PyTorch                 | 1.6                                        |
   +-------------------------+--------------------------------------------+
   | Python                  | 3.6，3.7                                   |
   +-------------------------+--------------------------------------------+
   | Driver                  | 4.15.12                                    |
   +-------------------------+--------------------------------------------+
   | CNToolkit               | 2.6.3                                      |
   +-------------------------+--------------------------------------------+
   | CNNL                    | 1.8.1                                      |
   +-------------------------+--------------------------------------------+
   | CNCL                    | 1.0.0                                      |
   +-------------------------+--------------------------------------------+
   | CNLight                 | 0.9.0                                      |
   +-------------------------+--------------------------------------------+
   | MagicMind               | 0.7.1                                      |
   +-------------------------+--------------------------------------------+
   | Tested distributions    |  Ubuntu 18.04（GCC 7.3.0）                 |
   +-------------------------+--------------------------------------------+

特性变更
~~~~~~~~~~~~~~~~~~~~~~

.. attention::

   | 本版本除兼容使用CNNL进行训练的场景外，还支持使用MagicMind后端加速TorchScript推理的应用场景。

- 升级MagicMind到v0.7.1版本。


v1.1.1
--------------------------------

.. _测试过的版本配置组合_v1.1.1:

测试过的版本配置组合
~~~~~~~~~~~~~~~~~~~~

.. tabularcolumns:: |m{0.25\textwidth}|m{0.3\textwidth}|
.. table:: 测试过的版本组合v1.1.1
   :align: center

   +-------------------------+--------------------------------------------+
   | Cambricon PyTorch       | 1.1.1                                      |
   +-------------------------+--------------------------------------------+
   | PyTorch                 | 1.6                                        |
   +-------------------------+--------------------------------------------+
   | Python                  | 3.6，3.7                                   |
   +-------------------------+--------------------------------------------+
   | Driver                  | 4.15.12                                    |
   +-------------------------+--------------------------------------------+
   | CNToolkit               | 2.6.3                                      |
   +-------------------------+--------------------------------------------+
   | CNNL                    | 1.8.1                                      |
   +-------------------------+--------------------------------------------+
   | CNCL                    | 1.0.0                                      |
   +-------------------------+--------------------------------------------+
   | CNLight                 | 0.9.0                                      |
   +-------------------------+--------------------------------------------+
   | MagicMind               | 0.6.2                                      |
   +-------------------------+--------------------------------------------+
   | Tested distributions    |  Ubuntu 18.04（GCC 7.3.0）                 |
   +-------------------------+--------------------------------------------+

特性变更
~~~~~~~~~~~~~~~~~~~~~~

.. attention::

   | 本版本除兼容使用CNNL进行训练的场景外，还新增了使用MagicMind后端加速TorchScript推理的应用场景。

- 优化transpose算子性能。


v1.1.0
--------------------------------

.. _测试过的版本配置组合_v1.1.0:

测试过的版本配置组合
~~~~~~~~~~~~~~~~~~~~

.. tabularcolumns:: |m{0.25\textwidth}|m{0.3\textwidth}|
.. table:: 测试过的版本组合v1.1.0
   :align: center

   +-------------------------+--------------------------------------------+
   | Cambricon PyTorch       | 1.1.0                                      |
   +-------------------------+--------------------------------------------+
   | PyTorch                 | 1.6                                        |
   +-------------------------+--------------------------------------------+
   | Python                  | 3.6，3.7                                   |
   +-------------------------+--------------------------------------------+
   | Driver                  | 4.15.11                                    |
   +-------------------------+--------------------------------------------+
   | CNToolkit               | 2.6.0                                      |
   +-------------------------+--------------------------------------------+
   | CNNL                    | 1.8.0                                      |
   +-------------------------+--------------------------------------------+
   | CNCL                    | 0.11.3                                     |
   +-------------------------+--------------------------------------------+
   | CNLight                 | 0.8.0                                      |
   +-------------------------+--------------------------------------------+
   | MagicMind               | 0.6.1                                      |
   +-------------------------+--------------------------------------------+
   | Tested distributions    |  Ubuntu 16.04（GCC 7.3.0）                 |
   +-------------------------+--------------------------------------------+

特性变更
~~~~~~~~~~~~~~~~~~~~~~

.. attention::

   | 本版本除兼容使用CNNL进行训练的场景外，还新增了使用MagicMind后端加速TorchScript推理的应用场景。

- CATCH适配MagicMind引擎API，增加MagicMind后端支持。

- TorchScript模型推理场景下，增加PyTorch IR图分段功能。

- TorchScript模型推理场景下，对于MagicMind不支持的算子，增加fallback to CNNL的功能。

- TorchScript模型推理场景下，对于MagicMind和CNNL都不支持的算子，增加fallback to CPU的功能。

- TorchScript模型推理场景下，支持使用MagicMind后端进行全FP32数据类型推理。

- MagicMind后端支持ResNet50网络的纯FP32数据类型推理。

- 新增支持MagicMind算子：add、batchnorm、conv2d、flatten、matmul、maxpool2d、avgpool2d、adaptiveavgpool2d、relu、transpose算子。详细说明，参见《寒武纪PyTorch用户手册》。


v1.0.1
--------------------------------

.. _测试过的版本配置组合_v1.0.1:

测试过的版本配置组合
~~~~~~~~~~~~~~~~~~~~

.. tabularcolumns:: |m{0.25\textwidth}|m{0.3\textwidth}|
.. table:: 测试过的版本组合v1.0.1
   :align: center

   +-------------------------+--------------------------------------------+
   | Cambricon PyTorch       | 1.0.1                                      |
   +-------------------------+--------------------------------------------+
   | PyTorch                 | 1.6                                        |
   +-------------------------+--------------------------------------------+
   | Python                  | 3.6，3.7                                   |
   +-------------------------+--------------------------------------------+
   | Driver                  | 4.15.9                                     |
   +-------------------------+--------------------------------------------+
   | CNToolkit               | 2.5.3                                      |
   +-------------------------+--------------------------------------------+
   | CNNL                    | 1.7.3                                      |
   +-------------------------+--------------------------------------------+
   | CNCL                    | 0.11.2                                     |
   +-------------------------+--------------------------------------------+
   | CNLight                 | 0.8.0                                      |
   +-------------------------+--------------------------------------------+
   | Tested distributions    |  Ubuntu 16.04（GCC 5.4.0）                 |
   +-------------------------+--------------------------------------------+

特性变更
~~~~~~~~~~~~~~~~~~~~~~

.. attention::

   | 本版本专门用于使用CNNL进行训练的场景。

- 优化transpose高维计算场景的性能。

- 新增支持ceil算子。详细说明，参见《寒武纪PyTorch用户手册》。


v1.0.0
--------------------------------

.. _测试过的版本配置组合_v1.0.0:

测试过的版本配置组合
~~~~~~~~~~~~~~~~~~~~

.. tabularcolumns:: |m{0.25\textwidth}|m{0.3\textwidth}|
.. table:: 测试过的版本组合v1.0.0
   :align: center

   +-------------------------+--------------------------------------------+
   | Cambricon PyTorch       | 1.0.0                                      |
   +-------------------------+--------------------------------------------+
   | PyTorch                 | 1.6                                        |
   +-------------------------+--------------------------------------------+
   | Python                  | 3.6，3.7                                   |
   +-------------------------+--------------------------------------------+
   | Driver                  | 4.15.9                                     |
   +-------------------------+--------------------------------------------+
   | CNToolkit               | 2.5.2                                      |
   +-------------------------+--------------------------------------------+
   | CNNL                    | 1.7.2                                      |
   +-------------------------+--------------------------------------------+
   | CNCL                    | 0.11.1                                     |
   +-------------------------+--------------------------------------------+
   | CNLight                 | 0.8.0                                      |
   +-------------------------+--------------------------------------------+
   | Tested distributions    |  Ubuntu 16.04（GCC 5.4.0）                 |
   +-------------------------+--------------------------------------------+


特性变更
~~~~~~~~~~~~~~~~~~~~~~

.. attention::

   | 本版本专门用于使用CNNL进行训练的场景。


- 支持MMCV框架自有算子nms。

- 提升index、index_put、bmm、mm、linear、matmul算子性能，优化Device2Host拷贝性能。

- Notify缓存优化，提升训练网络性能。

- 训练支持 ``torch.manual_seed`` ， ``torch.manual_seed_all`` 。

- 完善interpolate、epual、AvgPool3d、binary_cross_entropy、binary_cross_entropy_with_logits、
  addmm\_、repeat、conv1d、unflod算子支持，更新算子规格限制。
  详细说明，参见《寒武纪PyTorch用户手册》。

